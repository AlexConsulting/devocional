<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="docTitle">30 Dias: Soberania e F√© em Jesus (Devocional)</title>
    <style>
        /* CSS PRINCIPAL (LIGHT THEME - PADR√ÉO) */
        body {
            font-family: 'Georgia', serif;
            margin: 0;
            background-color: #e6e0d3; /* Papel envelhecido */
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column; 
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }
        .book-container {
            max-width: 650px;
            width: 90%;
            background: #fdfdfd;
            padding: 30px 40px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid #ccc;
            position: relative;
            transition: background 0.3s, border-color 0.3s;
        }
        h1, h2 {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            color: #4b0082; /* √çndigo */
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            margin-top: 0;
            transition: color 0.3s;
        }
        h1 {
            font-size: 1.8em;
            text-align: center;
            line-height: 1.3;
        }
        h2 {
            font-size: 1.5em;
            color: #1e8449; /* Verde escuro */
            text-align: center;
        }
        .subtitle {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-bottom: 25px;
        }
        .versiculos {
            background-color: #f0f8ff; /* Alice Blue */
            border-left: 5px solid #4b0082;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            font-size: 1.1em;
            line-height: 1.5;
            transition: background-color 0.3s;
        }
        .section {
            margin-bottom: 20px;
            padding-top: 10px;
            border-top: 1px dashed #eee;
        }
        .oracao-final {
            margin-top: 30px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            font-style: italic;
            transition: background-color 0.3s;
        }
        
        /* 1. ANIMA√á√ïES DE NAVEGA√á√ÉO */
        .page-out-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .page-out-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .page-in-right, .page-in-left {
            opacity: 0;
        }
        .book-container {
            opacity: 1;
            transform: translateX(0);
            transition: opacity 0.3s ease-in, transform 0.3s ease-in;
        }
        .page-in-right {
            animation: fadeInRight 0.3s forwards;
        }
        .page-in-left {
            animation: fadeInLeft 0.3s forwards;
        }
        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* NOVO: Estilo para as bandeiras em imagem */
        .lang-flag {
            width: 20px; 
            height: auto;
            margin-right: 8px;
            vertical-align: middle;
            border: 1px solid #ccc;
            border-radius: 2px;
        }
        /* FIM NOVO */

        /* 2. NAVEGA√á√ÉO E UTILS (Ajustado para Mobile) */
        .top-utils {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap; 
            gap: 15px; 
        }

        /* NOVO: Seletor de Idioma Dropdown */
        .language-selector-wrapper {
            position: relative;
            display: inline-block;
            z-index: 10; 
        }
        
        #langSelectButton {
            background-color: #f0f0f0;
            color: #4b0082;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
            font-size: 0.9em;
            display: flex; 
            align-items: center;
        }

        #langSelectButton:hover {
            background-color: #e0e0e0;
        }

        .lang-dropdown-content {
            display: none; 
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            padding: 5px 0;
            border-radius: 8px;
            margin-top: 5px;
        }

        .lang-dropdown-content button {
            color: #333;
            padding: 8px 16px;
            text-decoration: none;
            display: flex; 
            align-items: center;
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 1em;
            font-weight: bold;
        }

        .lang-dropdown-content button:hover,
        .lang-dropdown-content button.active {
            background-color: #ddd;
        }
        /* FIM: NOVO Seletor de Idioma Dropdown */
        
        #themeToggle {
            background: none;
            border: 1px solid #ccc;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            color: #333;
            transition: all 0.2s;
            margin-left: auto; 
            white-space: nowrap; 
        }

        #navigationControls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }
        .nav-button {
            background-color: #4b0082;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .nav-button:hover:not(:disabled) {
            background-color: #6a0dad;
        }
        .nav-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* 3. CHECKBOX DE CONCLU√çDO */
        .completion-status {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            padding: 10px;
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .completion-status label {
            margin-left: 10px;
            font-weight: bold;
            color: #1e8449;
            cursor: pointer;
        }
        .completion-status input[type="checkbox"] {
            transform: scale(1.3);
            cursor: pointer;
        }

        /* 4. RODAP√â */
        footer {
            margin-top: 20px;
            padding: 10px;
            text-align: center;
            font-size: 0.8em;
            color: #777;
            width: 90%;
            max-width: 650px;
        }
        footer a {
            color: #4b0082;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
        
        /* 5. MEDIA QUERIES (Ajustes para dispositivos menores) */
        @media (max-width: 700px) {
            .book-container {
                padding: 20px;
            }
            h1 {
                font-size: 1.5em;
            }
            h2 {
                font-size: 1.3em;
            }
            .nav-button {
                padding: 8px 15px;
                font-size: 14px;
            }
            .top-utils {
                flex-direction: column;
                align-items: stretch;
            }
            #themeToggle {
                margin-left: 0;
                margin-top: 10px;
            }
        }
        
        /* 6. DARK THEME (Tema Escuro) */
        .dark-theme {
            background-color: #121212;
            color: #f4f4f4;
        }
        .dark-theme .book-container {
            background: #1e1e1e;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            border-color: #333;
        }
        .dark-theme h1, .dark-theme h2 {
            color: #bb86fc; /* P√∫rpura */
            border-bottom-color: #333;
        }
        .dark-theme h2 {
            color: #03dac6; /* Ciano/Verde */
        }
        .dark-theme .subtitle {
            color: #aaa;
        }
        .dark-theme .versiculos {
            background-color: #2c2c2c;
            border-left-color: #bb86fc;
        }
        .dark-theme .oracao-final {
            background-color: #252525;
            border-color: #444;
        }
        .dark-theme .completion-status {
            background-color: #2c2c2c;
            border-color: #444;
        }
        .dark-theme .completion-status label {
            color: #03dac6;
        }
        .dark-theme .nav-button {
            background-color: #bb86fc;
        }
        .dark-theme .nav-button:hover:not(:disabled) {
            background-color: #c79bfd;
        }
        .dark-theme footer a {
            color: #bb86fc;
        }
        .dark-theme #themeToggle {
            color: #f4f4f4;
            border-color: #555;
            background: #1e1e1e;
        }

        /* Dark Theme para Seletor de Idioma */
        .dark-theme #langSelectButton {
            background-color: #2c2c2c;
            color: #bb86fc;
            border-color: #555;
        }

        .dark-theme #langSelectButton:hover {
            background-color: #383838;
        }

        .dark-theme .lang-dropdown-content {
            background-color: #1e1e1e;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.4);
        }

        .dark-theme .lang-dropdown-content button {
            color: #f4f4f4;
        }

        .dark-theme .lang-dropdown-content button:hover,
        .dark-theme .lang-dropdown-content button.active {
            background-color: #333;
        }
        /* FIM: Dark Theme para Seletor de Idioma */

        /* 7. ESTILOS DA BARRA DE PROGRESSO */
        .progress-bar-wrapper {
            background-color: #ddd;
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .progress-bar {
            height: 100%;
            width: 0%; 
            background-color: #28a745;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        /* Dark Theme para Progresso */
        .dark-theme #progressLabel {
            color: #03dac6;
        }

        .dark-theme .progress-bar-wrapper {
            background-color: #333;
        }

        .dark-theme .progress-bar {
            background-color: #03dac6;
        }
        /* FIM: Dark Theme para Progresso */
    </style>
</head>
<body class="light-theme">

    <div class="book-container">
        
        <div class="top-utils">
            <div class="language-selector-wrapper">
                <button id="langSelectButton" title="Seletor de Idioma">
                    <span id="currentLangDisplay"></span> ‚ñº 
                </button>
                <div id="langDropdown" class="lang-dropdown-content">
                    </div>
            </div>
            <button id="themeToggle" title="Alternar Tema">‚òÄÔ∏è Escuro/Claro üåô</button>
        </div>

        <h1 id="mainTitle">30 Dias: Soberania e F√© (Evangelho de Jo√£o)</h1>
        <p class="subtitle" id="subTitle">Foco na natureza divina de Jesus, novo nascimento e a autoridade do Filho.</p>

        <div id="progressContainer" style="margin-bottom: 15px;">
            <p id="progressLabel" style="text-align: center; font-size: 0.9em; margin-bottom: 5px; color: #4b0082; font-weight: bold;"></p>
            <div class="progress-bar-wrapper">
                <div id="progressBar" class="progress-bar"></div>
            </div>
        </div>
        <p id="pageCounter" style="text-align: right;"></p>

        <div id="devotionalContent">
            </div>

        <div class="completion-status">
            <input type="checkbox" id="completedCheck">
            <label id="completedLabel" for="completedCheck">Marcar como Conclu√≠do</label>
        </div>

        <div id="navigationControls">
            <button id="prevButton" class="nav-button">‚Üê Anterior</button>
            <button id="nextButton" class="nav-button">Pr√≥ximo ‚Üí</button>
        </div>

    </div>

    <footer>
        <p>Devocional adaptado e criado por voc√™. C√≥digo-fonte dispon√≠vel sob licen√ßa MIT. | <span id="footerText"></span></p>
    </footer>

    <script>
        // --- DADOS DO DEVOCIONAL ---
        const totalDays = 30; // N√∫mero total de dias
        let currentDay = 1;
        let currentLang = localStorage.getItem('devotionalLang') || 'pt'; 
        let currentTheme = localStorage.getItem('devotionalTheme') || 'light-theme';

        const devotionalContentDiv = document.getElementById('devotionalContent');
        
        // Mapeamento de Bandeiras (USANDO IMAGENS/SVG DE UM CDN)
        const flagMap = {
            'pt': {
                icon: '<img src="https://flagicons.lipis.dev/flags/4x3/br.svg" class="lang-flag" alt="Portugu√™s">',
                text: 'Portugu√™s'
            },
            'en': {
                icon: '<img src="https://flagicons.lipis.dev/flags/4x3/us.svg" class="lang-flag" alt="English">',
                text: 'English'
            },
            'es': {
                icon: '<img src="https://flagicons.lipis.dev/flags/4x3/es.svg" class="lang-flag" alt="Espa√±ol">',
                text: 'Espa√±ol'
            },
            'fr': {
                icon: '<img src="https://flagicons.lipis.dev/flags/4x3/fr.svg" class="lang-flag" alt="Fran√ßais">',
                text: 'Fran√ßais'
            }
        };
        
        // --- DADOS MULTI-IDIOMA ---
        const langData = {
            pt: {
                title: "30 Dias: Soberania e F√© (Evangelho de Jo√£o)",
                subtitle: "Foco na natureza divina de Jesus, novo nascimento e a autoridade do Filho.",
                page: "Dia",
                of: "de",
                sections: {
                    resumo: "Resumo e Reflex√£o:",
                    aplicacao: "Aplica√ß√£o Pr√°tica:",
                    oracao: "Ora√ß√£o Final"
                },
                controls: {
                    prev: "‚Üê Anterior",
                    next: "Pr√≥ximo ‚Üí",
                    check: "Marcar como Conclu√≠do",
                    theme: "‚òÄÔ∏è Escuro/Claro üåô"
                },
                progress: { // NOVO: Textos para o progresso
                    total: "Progresso Total:",
                    days: "Dias",
                    of: "de"
                }
            },
            en: {
                title: "30 Days: Sovereignty and Faith (Gospel of John)",
                subtitle: "Focus on Jesus' divine nature, new birth, and the Son's authority.",
                page: "Day",
                of: "of",
                sections: {
                    resumo: "Summary and Reflection:",
                    aplicacao: "Practical Application:",
                    oracao: "Final Prayer"
                },
                controls: {
                    prev: "‚Üê Previous",
                    next: "Next ‚Üí",
                    check: "Mark as Completed",
                    theme: "‚òÄÔ∏è Dark/Light üåô"
                },
                progress: { // NOVO: Textos para o progresso
                    total: "Total Progress:",
                    days: "Days",
                    of: "of"
                }
            },
            es: {
                title: "30 D√≠as: Soberan√≠a y F√© (Evangelio de Juan)",
                subtitle: "Enfoque en la naturaleza divina de Jes√∫s, nuevo nacimiento y la autoridad del Hijo.",
                page: "D√≠a",
                of: "de",
                sections: {
                    resumo: "Resumen y Reflexi√≥n:",
                    aplicacion: "Aplicaci√≥n Pr√°ctica:",
                    oracao: "Oraci√≥n Final"
                },
                controls: {
                    prev: "‚Üê Anterior",
                    next: "Siguiente ‚Üí",
                    check: "Marcar como Completado",
                    theme: "‚òÄÔ∏è Oscuro/Claro üåô"
                },
                progress: { // NOVO: Textos para o progresso
                    total: "Progreso Total:",
                    days: "D√≠as",
                    of: "de"
                }
            },
            fr: {
                title: "30 Jours: Souverainet√© et Foi (√âvangile de Jean)",
                subtitle: "Accent sur la nature divine de J√©sus, la nouvelle naissance et l'autorit√© du Fils.",
                page: "Jour",
                of: "de",
                sections: {
                    resumo: "R√©sum√© et R√©flexion:",
                    aplicacion: "Application Pratique:",
                    oracao: "Pri√®re Finale"
                },
                controls: {
                    prev: "‚Üê Pr√©c√©dent",
                    next: "Suivant ‚Üí",
                    check: "Marquer comme Termin√©",
                    theme: "‚òÄÔ∏è Sombre/Clair üåô"
                },
                progress: { // NOVO: Textos para o progresso
                    total: "Progression Totale:",
                    days: "Jours",
                    of: "de"
                }
            }
        };

        // Estrutura de conte√∫do (Apenas o Dia 1 e 2 como exemplo)
        const devotionalContent = {
            1: {
                pt: {
                    h2: "O Verbo Se Fez Carne (Jo√£o 1:1-18)",
                    versiculos: "Jo√£o 1:1: No princ√≠pio era o Verbo, e o Verbo estava com Deus, e o Verbo era Deus.",
                    resumo: "O Evangelho de Jo√£o come√ßa afirmando a divindade e preexist√™ncia de Jesus (o Verbo). Ele √© a luz que ilumina a todos e veio ao mundo, mas o mundo n√£o o reconheceu. O ponto central √© que Ele, Deus, se fez homem para nos dar o direito de sermos filhos de Deus.",
                    aplicacao: "Pense em uma √°rea da sua vida onde voc√™ tenta 'ser sua pr√≥pria luz'. Pe√ßa a Deus para que a verdade de Cristo (o Verbo) ilumine essa √°rea, rendendo-a √† Sua soberania.",
                    oracao: "Senhor, obrigado por Jesus, o Verbo que se fez carne. Ajuda-me a reconhecer a Sua divindade e a andar na luz que s√≥ Ele pode oferecer. Que eu viva como um filho, n√£o como um √≥rf√£o. Am√©m."
                },
                en: {
                    h2: "The Word Became Flesh (John 1:1-18)",
                    versiculos: "John 1:1: In the beginning was the Word, and the Word was with God, and the Word was God.",
                    resumo: "The Gospel of John begins by asserting the divinity and pre-existence of Jesus (the Word). He is the light that enlightens everyone and came into the world, but the world did not recognize Him. The central point is that He, God, became man to give us the right to become children of God.",
                    aplicacao: "Think of an area of your life where you try to 'be your own light'. Ask God for the truth of Christ (the Word) to illuminate that area, surrendering it to His sovereignty.",
                    oracao: "Lord, thank you for Jesus, the Word made flesh. Help me to recognize His divinity and to walk in the light that only He can offer. May I live as a child, not as an orphan. Amen."
                },
                es: {
                    h2: "El Verbo Se Hizo Carne (Juan 1:1-18)",
                    versiculos: "Juan 1:1: En el principio era el Verbo, y el Verbo estaba con Dios, y el Verbo era Dios.",
                    resumo: "El Evangelio de Juan comienza afirmando la divinidad y preexistencia de Jes√∫s (el Verbo). √âl es la luz que ilumina a todos y vino al mundo, pero el mundo no lo reconoci√≥. El punto central es que √âl, Dios, se hizo hombre para darnos el derecho de ser hijos de Dios.",
                    aplicacion: "Piensa en un √°rea de tu vida donde intentas 'ser tu propia luz'. P√≠dele a Dios que la verdad de Cristo (el Verbo) ilumine esa √°rea, rindi√©ndola a Su soberan√≠a.",
                    oracao: "Se√±or, gracias por Jes√∫s, el Verbo hecho carne. Ay√∫dame a reconocer Su divinidad y a caminar en la luz que solo √âl puede ofrecer. Que viva como un hijo, no como un hu√©rfano. Am√©n."
                },
                fr: {
                    h2: "La Parole S'est Faite Chair (Jean 1:1-18)",
                    versiculos: "Jean 1:1: Au commencement √©tait la Parole, et la Parole √©tait avec Dieu, et la Parole √©tait Dieu.",
                    resumo: "L'√âvangile de Jean commence par affirmer la divinit√© et la pr√©existence de J√©sus (la Parole). Il est la lumi√®re qui √©claire chacun et est venu dans le monde, mais le monde ne l'a pas reconnu. Le point central est que Lui, Dieu, s'est fait homme pour nous donner le droit de devenir enfants de Dieu.",
                    aplicacion: "Pensez √† un domaine de votre vie o√π vous essayez d'√™tre 'votre propre lumi√®re'. Demandez √† Dieu que la v√©rit√© du Christ (la Parole) illumine ce domaine, le soumettant √† Sa souverainet√©.",
                    oracao: "Seigneur, merci pour J√©sus, la Parole faite chair. Aide-moi √† reconna√Ætre Sa divinit√© et √† marcher dans la lumi√®re que Lui seul peut offrir. Que je vive comme un enfant, pas comme un orphelin. Amen."
                }
            },
            2: {
                pt: {
                    h2: "A Necessidade do Novo Nascimento (Jo√£o 3:1-21)",
                    versiculos: "Jo√£o 3:3: Respondeu Jesus: 'Em verdade, em verdade te digo que se algu√©m n√£o nascer de novo, n√£o pode ver o Reino de Deus.'",
                    resumo: "O di√°logo com Nicodemos revela a profundidade da obra de Deus: o Reino n√£o √© acess√≠vel por rituais ou esfor√ßo humano, mas por um novo nascimento espiritual. Isso s√≥ √© poss√≠vel atrav√©s de Jesus, que foi levantado como a serpente no deserto, para que todo o que Nele cr√™ n√£o pere√ßa, mas tenha a vida eterna. A soberania de Deus se manifesta em nos dar a capacidade de crer.",
                    aplicacao: "O que em sua vida ainda parece 'velho' ou 'carnal'? Pe√ßa ao Esp√≠rito Santo para operar o novo nascimento de forma mais profunda em sua mente e atitudes, tornando-o mais conforme √† imagem de Cristo.",
                    oracao: "Pai, reconhe√ßo que preciso nascer de novo a cada dia. Opera em mim a Sua vontade, renova a minha mente e ajuda-me a crer no Seu Filho para ter a vida eterna. Am√©m."
                },
                en: {
                    h2: "The Necessity of New Birth (John 3:1-21)",
                    versiculos: "John 3:3: Jesus answered, 'Truly, truly, I say to you, unless one is born again he cannot see the kingdom of God.'",
                    resumo: "The dialogue with Nicodemus reveals the depth of God's work: the Kingdom is not accessible through rituals or human effort, but through a spiritual new birth. This is only possible through Jesus, who was lifted up like the serpent in the wilderness, so that everyone who believes in Him may not perish but have eternal life. God's sovereignty is manifested in giving us the capacity to believe.",
                    aplicacao: "What in your life still seems 'old' or 'carnal'? Ask the Holy Spirit to operate the new birth more deeply in your mind and attitudes, making you more conformed to the image of Christ.",
                    oracao: "Father, I recognize that I need to be born again every day. Work Your will in me, renew my mind, and help me to believe in Your Son to have eternal life. Amen."
                },
                es: {
                    h2: "La Necesidad del Nuevo Nacimiento (Juan 3:1-21)",
                    versiculos: "Juan 3:3: Respondi√≥ Jes√∫s: 'De cierto, de cierto te digo, que el que no naciere de nuevo, no puede ver el reino de Dios.'",
                    resumo: "El di√°logo con Nicodemo revela la profundidad de la obra de Dios: el Reino no es accesible por rituales o esfuerzo humano, sino por un nuevo nacimiento espiritual. Esto solo es posible a trav√©s de Jes√∫s, quien fue levantado como la serpiente en el desierto, para que todo el que en √âl cree no se pierda, mas tenga vida eterna. La soberan√≠a de Dios se manifiesta al darnos la capacidad de creer.",
                    aplicacion: "¬øQu√© en tu vida todav√≠a parece 'viejo' o 'carnal'? P√≠dele al Esp√≠ritu Santo que opere el nuevo nacimiento de manera m√°s profunda en tu mente y actitudes, haci√©ndote m√°s conforme a la imagen de Cristo.",
                    oracao: "Padre, reconozco que necesito nacer de nuevo cada d√≠a. Opera en m√≠ Tu voluntad, renueva mi mente y ay√∫dame a creer en Tu Hijo para tener la vida eterna. Am√©n."
                },
                fr: {
                    h2: "La N√©cessit√© de la Nouvelle Naissance (Jean 3:1-21)",
                    versiculos: "Jean 3:3: J√©sus r√©pondit : 'En v√©rit√©, en v√©rit√©, je te le dis, si un homme ne na√Æt de nouveau, il ne peut voir le royaume de Dieu.'",
                    resumo: "Le dialogue avec Nicod√®me r√©v√®le la profondeur de l'≈ìuvre de Dieu : le Royaume n'est pas accessible par des rituels ou des efforts humains, mais par une nouvelle naissance spirituelle. Cela n'est possible qu'√† travers J√©sus, qui a √©t√© √©lev√© comme le serpent dans le d√©sert, afin que quiconque croit en Lui ne p√©risse point, mais qu'il ait la vie √©ternelle. La souverainet√© de Dieu se manifeste en nous donnant la capacit√© de croire.",
                    aplicacion: "Qu'est-ce qui dans votre vie semble encore 'vieux' ou 'charnel' ? Demandez au Saint-Esprit d'op√©rer la nouvelle naissance plus profond√©ment dans votre esprit et vos attitudes, vous rendant plus conforme √† l'image du Christ.",
                    oracao: "P√®re, je reconnais que j'ai besoin de na√Ætre de nouveau chaque jour. Op√®re en moi Ta volont√©, renouvelle mon esprit et aide-moi √† croire en Ton Fils pour avoir la vie √©ternelle. Amen."
                }
            }
            // ... Adicionar dias 3 a 30 aqui ...
        };


        // --- FUN√á√ïES DE ARMAZENAMENTO E INTERFACE ---
        function getSavedProgress() {
            const savedDay = parseInt(localStorage.getItem('devotionalDay'));
            return (savedDay >= 1 && savedDay <= totalDays) ? savedDay : 1;
        }

        function saveProgress(day) {
            localStorage.setItem('devotionalDay', day);
        }

        function getDayStatus(day) {
            return localStorage.getItem(`dayComplete_${day}`) === 'true';
        }

        function saveDayStatus(day, isComplete) {
            localStorage.setItem(`dayComplete_${day}`, isComplete ? 'true' : 'false');
        }
        
        function updateOverallProgress() {
            let completedDaysCount = 0;
            for (let i = 1; i <= totalDays; i++) {
                if (getDayStatus(i)) {
                    completedDaysCount++;
                }
            }

            const percentage = Math.round((completedDaysCount / totalDays) * 100);
            const progressBar = document.getElementById('progressBar');
            const progressLabel = document.getElementById('progressLabel');
            
            const progressTexts = langData[currentLang].progress; // NOVO: Pega os textos do idioma atual
            
            // Atualiza a barra de progresso visual
            progressBar.style.width = percentage + '%';
            
            // Atualiza o texto de progresso (AGORA TRADUZIDO)
            progressLabel.textContent = `${progressTexts.total} ${completedDaysCount} ${progressTexts.of} ${totalDays} ${progressTexts.days} (${percentage}%)`;
        }


        function renderDayContent(day) { 
            const content = devotionalContent[day];
            const langContent = content ? (content[currentLang] || content['pt']) : devotionalContent[1]['pt'];
            const labels = langData[currentLang].sections; 
            
            const resumoText = langContent.resumo;
            const aplicacaoText = langContent.aplicacion || langContent.aplicacao; 
            const oracaoText = langContent.oracao;

            const devotionalDiv = document.createElement('div');
            devotionalDiv.innerHTML = `
                <h2>${langContent.h2}</h2>
                <div class="versiculos">${langContent.versiculos}</div>
                <div class="section">
                    <strong>${labels.resumo}</strong>
                    <p>${resumoText}</p>
                </div>
                <div class="section">
                    <strong>${labels.aplicacion || labels.aplicacao}</strong>
                    <p>${aplicacaoText}</p>
                </div>
                <div class="oracao-final">
                    <p>${oracaoText}</p>
                </div>
            `;

            devotionalContentDiv.innerHTML = devotionalDiv.innerHTML;
            
            const data = langData[currentLang];
            document.getElementById('pageCounter').textContent = `${data.page} ${currentDay} ${data.of} ${totalDays}`;

            document.getElementById('prevButton').disabled = currentDay === 1;
            document.getElementById('nextButton').disabled = currentDay === totalDays;

            const check = document.getElementById('completedCheck');
            check.onchange = null;
            check.checked = getDayStatus(currentDay);
            
            check.onchange = () => { 
                saveDayStatus(currentDay, check.checked);
                updateOverallProgress();
                if (check.checked && currentDay < totalDays) {
                    setTimeout(() => {
                        handleNavigation(1);
                    }, 300);
                }
            };
        }

        function updateTexts() {
            const data = langData[currentLang];
            
            renderDayContent(currentDay);
            
            document.getElementById('docTitle').textContent = data.title;
            document.getElementById('mainTitle').textContent = data.title;
            document.getElementById('subTitle').textContent = data.subtitle;
            document.getElementById('completedLabel').textContent = data.controls.check;
            document.getElementById('prevButton').textContent = data.controls.prev;
            document.getElementById('nextButton').textContent = data.controls.next;
            document.getElementById('themeToggle').textContent = data.controls.theme;
            
            updateOverallProgress(); // GARANTIDO: Atualiza o texto de progresso ap√≥s a mudan√ßa de idioma/textos

            const year = new Date().getFullYear();
            document.getElementById('footerText').innerHTML = `Copyright &copy; ${year}`;
        }

        function handleNavigation(direction) {
            const isForward = direction > 0;
            const outClass = isForward ? 'page-out-left' : 'page-out-right';
            const inClass = isForward ? 'page-in-right' : 'page-in-left';

            // 1. Inicia anima√ß√£o de sa√≠da
            devotionalContentDiv.classList.remove('page-in-right', 'page-in-left');
            devotionalContentDiv.classList.add(outClass);

            setTimeout(() => {
                // 2. Atualiza o dia
                currentDay = Math.max(1, Math.min(totalDays, currentDay + direction));
                saveProgress(currentDay);

                // 3. Renderiza o novo conte√∫do
                renderDayContent(currentDay);
                updateOverallProgress();

                // 4. Inicia anima√ß√£o de entrada
                devotionalContentDiv.classList.remove(outClass);
                devotionalContentDiv.classList.add(inClass);
            }, 300); 
        }
        
        function toggleTheme() {
            if (document.body.classList.contains('light-theme')) {
                document.body.classList.replace('light-theme', 'dark-theme');
                currentTheme = 'dark-theme';
            } else {
                document.body.classList.replace('dark-theme', 'light-theme');
                currentTheme = 'light-theme';
            }
            localStorage.setItem('devotionalTheme', currentTheme);
            updateTexts();
        }

        function updateLanguageSelector() {
            const currentLangDisplay = document.getElementById('currentLangDisplay');
            const langDropdown = document.getElementById('langDropdown');

            // 1. Atualiza o bot√£o principal
            const currentFlagData = flagMap[currentLang];
            currentLangDisplay.innerHTML = `${currentFlagData.icon} ${currentFlagData.text}`;

            // 2. Preenche/Atualiza o Dropdown
            langDropdown.innerHTML = ''; 
            Object.keys(flagMap).forEach(langCode => {
                const data = flagMap[langCode];
                const button = document.createElement('button');
                button.dataset.lang = langCode;
                button.title = data.text;
                button.innerHTML = `${data.icon} ${data.text}`;
                
                if (langCode === currentLang) {
                    button.classList.add('active');
                }

                button.addEventListener('click', () => changeLanguage(langCode));
                langDropdown.appendChild(button);
            });
        }

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('devotionalLang', lang);
            updateTexts();
            updateLanguageSelector();
            document.getElementById('langDropdown').style.display = 'none';
        }

        // --- MANUSEIO DE EVENTOS E INICIALIZA√á√ÉO ---
        document.getElementById('prevButton').addEventListener('click', () => handleNavigation(-1));
        document.getElementById('nextButton').addEventListener('click', () => handleNavigation(1));

        document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        
        // Event Listener para abrir/fechar o Dropdown de Idiomas
        document.getElementById('langSelectButton').addEventListener('click', (event) => {
            event.stopPropagation();
            const dropdown = document.getElementById('langDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        });

        // Fecha o dropdown se o usu√°rio clicar fora
        document.addEventListener('click', (event) => {
            const dropdown = document.getElementById('langDropdown');
            const wrapper = document.querySelector('.language-selector-wrapper');
            if (dropdown.style.display === 'block' && !wrapper.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });

        window.onload = () => {
            document.body.classList.remove('light-theme', 'dark-theme');
            document.body.classList.add(currentTheme);
            
            currentDay = getSavedProgress();
            
            updateTexts();
            updateLanguageSelector(); 
            // updateOverallProgress() √© chamado dentro de updateTexts() agora
            
            devotionalContentDiv.classList.add('page-in-right');
        };

    </script>

</body>
</html>