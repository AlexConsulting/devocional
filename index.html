<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="htmlTitle">Devocional para Crian√ßas ‚Äî Dia 1</title>
  <style>
    :root { --bg: #fffaf2; --text: #2b2b2b; --theme: #4a90e2; }
    body { margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); }

    /* NOVO CONTAINER DO SELETOR DE IDIOMAS FLUTUANTE */
    #lang-container {
        position: fixed; 
        top: 15px;
        right: 15px;
        z-index: 100;
    }

    /* BOTAO DE TOGGLE (AGORA COM BANDEIRA DO PA√çS ATUAL) */
    #lang-toggle-btn {
        background: #fff;
        border: 2px solid #ccc;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        padding: 0; /* Garante que a imagem se encaixe */
        overflow: hidden; /* Corta o excesso da imagem */
    }
    #lang-toggle-btn img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
    }
    #lang-toggle-btn:hover {
        border-color: var(--theme, #4a90e2);
    }

    /* DROPDOWN DE IDIOMAS */
    .lang-switch {
        display: none; 
        flex-direction: column;
        gap: 8px;
        margin-top: 8px;
        padding: 8px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        align-items: flex-end; 
    }
    .lang-switch.active {
        display: flex; 
    }

    /* BOTOES DE IDIOMA INDIVIDUAIS */
    .lang-switch button { 
      background: #fff; 
      color: #333; 
      border: 2px solid #ccc; 
      border-radius: 50%; 
      padding: 0; 
      width: 36px; 
      height: 36px;
      text-align: center;
      cursor: pointer; 
      transition: all 0.2s ease; 
      margin: 0; 
      display: flex; 
      align-items: center;
      justify-content: center;
      overflow: hidden; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .lang-switch button img {
      width: 100%; 
      height: 100%;
      object-fit: cover; 
      border-radius: 50%; 
    }
    .lang-switch button:hover { 
      border-color: var(--theme, #4a90e2); 
    }
    /* FIM CSS DO SELETOR DE IDIOMAS */

    header { padding: 16px; text-align: center; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .title { font-size: 1.8rem; margin: 0 0 8px; color: var(--theme); }
    .subtitle { color: #555; margin: 0 0 16px; }

    .container { max-width: 880px; margin: 0 auto; padding: 16px; }
    .card { background: #fff; border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,0.08); padding: 16px; margin-bottom: 20px; }

    /* Esconde o bloco de texto do devocional (Vers√≠culo, Resumo, Aplica√ß√£o, Ora√ß√£o) */
    #devocional { display: none; }

    .gender-switch { margin: 12px 0; text-align: center; display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
    .gender-switch button { 
      border-radius: 999px; padding: 10px 16px; font-weight: 600; cursor: pointer; font-size: 1rem; 
      background: transparent;
      border: 2px solid;
      color: var(--text); 
      transition: all 0.2s ease;
    }
    .gender-switch button[onclick="setGender('boy')"] { border-color: #4a90e2; }
    .gender-switch button[onclick="setGender('girl')"] { border-color: #e75480; }
    .gender-switch button.active-boy { background: #4a90e2; border-color: #4a90e2; color: #fff; }
    .gender-switch button.active-girl { background: #e75480; border-color: #e75480; color: #fff; }

    .audio { display: flex; align-items: center; gap: 12px; justify-content: center; margin: 12px 0 20px; }
    
    /* Estilo Outline Cinza Escuro para bot√µes de √°udio e a√ß√£o */
    .audio button, .link-btn {
        border: 2px solid #555; 
        background: transparent;
        color: #555; 
        border-radius: 999px;
        padding: 10px 16px;
        font-weight: 600;
        cursor: pointer;
        font-size: 1rem;
        text-decoration: none;
        display: inline-block;
        transition: all 0.2s ease;
    }
    
    /* Regra 1: Hover padr√£o (azul/rosa s√≥lido) */
    .audio button:hover, .link-btn:hover { 
        background: var(--theme);
        border-color: var(--theme);
        color: #fff;
    }
    
    /* Regra 2: Hover neutro (cinza claro) - Estado inicial */
    .neutral-hover .audio button:hover, .neutral-hover .link-btn:hover {
        background: #f0f0f0; 
        border-color: #555; 
        color: #2b2b2b; 
    }
    
    /* Estilo para bot√µes desabilitados */
    .audio button[disabled], .link-btn[disabled], .stop-btn[disabled] {
        cursor: not-allowed !important;
        opacity: 0.5;
        background: transparent !important;
        color: #555 !important;
        border-color: #555 !important;
        pointer-events: none; 
    }

    /* O stop-btn usa borda e cor de fundo */
    .stop-btn { background: #f44336; color: #fff; border: 2px solid #f44336; border-radius: 999px; padding: 10px 16px;
      font-weight: 600; cursor: pointer; font-size: 1rem; transition: background 0.2s ease; }
    .neutral-hover .stop-btn:hover { background: #f0f0f0; border-color: #555; color: #2b2b2b; }
    body:not(.neutral-hover) .stop-btn:hover { background: #d32f2f; border-color: #d32f2f; }
    .stop-btn[disabled] { background: transparent !important; color: #555 !important; border-color: #555 !important; }

    /* Centraliza a √∫nica imagem */
    #imagesSection { 
      /* OCULTA por padr√£o */
      display: none;
      /* Exibe como flex para centralizar o √∫nico figure quando vis√≠vel */
      justify-content: center; 
      margin-top: 16px; 
    }

    figure { 
      margin: 0; 
      background: #f7f7f7; 
      border-radius: 12px; 
      padding: 10px; 
      text-align: center; 
      border: 2px solid var(--theme); 
      max-width: 320px; /* Desenho Colorido Reduzido */
      /* Garante que o figure preencha o m√°ximo permitido na centraliza√ß√£o */
      width: 100%; 
    }
    img { 
      width: 100%; 
      height: auto; 
      border-radius: 8px; 
      display: block; 
      margin: 0 auto; 
    }
    figcaption { font-size: 0.9rem; color: #666; margin-top: 6px; }

    .buttons { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 24px; justify-content: center; }

    body.boy { --theme: #4a90e2; }
    body.girl { --theme: #e75480; }
  </style>
</head>
<body class="boy">
  <div id="lang-container">
    <button id="lang-toggle-btn" title="Selecionar Idioma" onclick="toggleLangSwitch()">
        <img id="current-lang-flag" src="https://flagicons.lipis.dev/flags/4x3/br.svg" alt="Bandeira do Brasil">
    </button>
    <div class="lang-switch">
      <button onclick="setLang('pt')" title="Portugu√™s"><img src="https://flagicons.lipis.dev/flags/4x3/br.svg" alt="Bandeira do Brasil"></button>
      <button onclick="setLang('en')" title="English"><img src="https://flagicons.lipis.dev/flags/4x3/us.svg" alt="US Flag"></button>
      <button onclick="setLang('es')" title="Espa√±ol"><img src="https://flagicons.lipis.dev/flags/4x3/es.svg" alt="Bandera de Espa√±a"></button>
      <button onclick="setLang('fr')" title="Fran√ßais"><img src="https://flagicons.lipis.dev/flags/4x3/fr.svg" alt="Drapeau de la France"></button>
    </div>
  </div>

  <header>
    <h1 id="mainTitle" class="title">Devocional Infantil</h1>
    <p id="subtitle" class="subtitle"></p>

    <div class="gender-switch">
      <button id="btnBoy" onclick="setGender('boy')">üë¶ Sou Menino</button>
      <button id="btnGirl" onclick="setGender('girl')">üëß Sou Menina</button>
    </div>

    <div class="audio">
      <button id="playBtn" class="link-btn" disabled>‚ñ∂Ô∏è Ouvir Devocional</button>
      <button id="speedBtn" disabled>Velocidade: 1.00x</button>
      <button id="stopBtn" class="stop-btn" disabled>‚èπÔ∏è Parar</button>
    </div>

    <section id="imagesSection" class="images">
      <figure><img id="imgColorSrc" src="" alt="" /><figcaption id="captionColor"></figcaption></figure>
    </section>
  </header>

  <main class="container">
    <div id="devocional" class="card"></div>
    <div class="buttons">
      <a id="printBtn" class="link-btn" href="" target="_blank">Imprimir</a>
      <a id="nextBtn" class="link-btn" href="/devocionais/dia-2.html">Pr√≥ximo devocional</a>
    </div>
  </main>

  <script>
    // Estado
    let currentLang = 'pt';
    let currentGender = 'boy';
    let speedIdx = 0; 
    const speeds = [1.0, 1.15, 1.3]; 

    // Refer√™ncias
    const htmlTitleEl = document.getElementById('htmlTitle');
    const mainTitleEl = document.getElementById('mainTitle');
    const playBtn = document.getElementById('playBtn'); 
    const speedBtn = document.getElementById('speedBtn');
    const stopBtn = document.getElementById('stopBtn');
    const devBox = document.getElementById('devocional');
    const subtitleEl = document.getElementById('subtitle');
    const printBtn = document.getElementById('printBtn');
    const nextBtn = document.getElementById('nextBtn');
    const captionColor = document.getElementById('captionColor');
    const imgColorSrc = document.getElementById('imgColorSrc');
    const btnBoy = document.getElementById('btnBoy');
    const btnGirl = document.getElementById('btnGirl');
    const imagesSection = document.getElementById('imagesSection'); 
    const langSwitchEl = document.querySelector('.lang-switch');
    const currentLangFlagEl = document.getElementById('current-lang-flag'); // NOVO: Refer√™ncia para a bandeira no bot√£o de toggle

    // Dados das Bandeiras para o Bot√£o de Toggle
    const flagData = {
        'pt': { src: 'https://flagicons.lipis.dev/flags/4x3/br.svg', alt: 'Bandeira do Brasil' },
        'en': { src: 'https://flagicons.lipis.dev/flags/4x3/us.svg', alt: 'US Flag' },
        'es': { src: 'https://flagicons.lipis.dev/flags/4x3/es.svg', alt: 'Bandera de Espa√±a' },
        'fr': { src: 'https://flagicons.lipis.dev/flags/4x3/fr.svg', alt: 'Drapeau de la France' }
    };

    // Fun√ß√µes de UI
    function toggleLangSwitch() {
        langSwitchEl.classList.toggle('active');
    }

    // NOVOS CAMINHOS DE IMAGEM UNIFICADOS (AGORA RELATIVOS, CONFORME SOLICITADO)
    const BOY_COLOR_IMG = './img/dia-1/boy.png'; 
    const GIRL_COLOR_IMG = './img/dia-1/girl.png'; 
    
    // Caminhos originais para BW e Print (AJUSTADOS PARA RELATIVOS)
    const BOY_BW_IMG = './img/dia-1/menino_para_colorir.webp'; 
    const GIRL_BW_IMG = './img/dia-1/menina_para_colorir.webp';
    const BOY_PRINT_PDF = './print/dia-1/menino_para_colorir.pdf';
    const GIRL_PRINT_PDF = './print/dia-1/menina_para_colorir.pdf';


    // Conte√∫do por idioma e g√™nero
    const content = {
      pt: {
        header: {
            mainTitle: 'Devocional para Crian√ßas',
            htmlTitle: 'Devocional para Crian√ßas ‚Äî Dia 1',
            play: '‚ñ∂Ô∏è Ouvir Devocional',
            speed: 'Velocidade',
            stop: '‚èπÔ∏è Parar',
        },
        boy: {
          title: 'Dia 1 ‚Äî O Presente √önico de Deus',
          html: `
            <h3>Vers√≠culo Chave</h3>
            <p><strong>G√°latas 1:8-9 (NTLH):</strong> ‚ÄúMas que fiquem debaixo da maldi√ß√£o de Deus todos aqueles que anunciem uma mensagem diferente da que n√≥s anunciamos.‚Äù</p>
            <h3>Resumo</h3>
            <p>Existe s√≥ uma not√≠cia incr√≠vel sobre como ficamos amigos de Deus: a salva√ß√£o √© um presente que Jesus nos d√°. N√£o √© um trof√©u que a gente ganha fazendo tudo certo ou obedecendo um monte de regras. √â s√≥ pela gra√ßa de Deus ‚Äî o presente mais valioso que existe.</p>
            <h3>Aplica√ß√£o Pr√°tica</h3>
            <p>Voc√™ j√° pensou que precisa ser o melhor, obedecer sempre, ou nunca errar para Deus gostar mais de voc√™? N√£o precisa! Jesus j√° fez tudo por voc√™. Agrade√ßa e confie: o amor dEle n√£o depende do seu desempenho.</p>
            <h3>Ora√ß√£o</h3>
            <p>‚ÄúQuerido Deus, obrigado porque a salva√ß√£o √© um presente de Jesus. Me ajuda a lembrar que o Senhor me ama mesmo quando eu erro. E que minhas boas a√ß√µes n√£o compram o Teu amor. Am√©m!‚Äù</p>
          `
        },
        girl: {
          title: 'Dia 1 ‚Äî O Presente √önico de Deus',
          html: `
            <h3>Vers√≠culo Chave</h3>
            <p><strong>G√°latas 1:8-9 (NTLH):</strong> ‚ÄúMas que fiquem debaixo da maldi√ß√£o de Deus todos aqueles que anunciem uma mensagem diferente da que n√≥s anunciamos.‚Äù</p>
            <h3>Resumo</h3>
            <p>Existe s√≥ uma not√≠cia maravilhosa sobre como ficamos amigas de Deus: a salva√ß√£o √© um presente que Jesus nos d√°. N√£o √© uma medalha para quem faz tudo certinho. √â s√≥ a gra√ßa dEle ‚Äî um presente de amor que n√£o d√° pra trocar, completar ou melhorar.</p>
            <h3>Aplica√ß√£o Pr√°tica</h3>
            <p>√Äs vezes voc√™ pode achar que precisa ser perfeita, nunca errar ou sempre agradar todo mundo para Deus te amar. Mas o amor de Jesus j√° √© completo, do jeitinho que voc√™ √©. Voc√™ pode descansar nisso: Jesus j√° fez tudo o que voc√™ precisa.</p>
            <h3>Ora√ß√£o</h3>
            <p>‚ÄúQuerido Deus, obrigada porque a salva√ß√£o √© um presente de Jesus. Me ajuda a lembrar que o Senhor me ama at√© quando eu erro. E que minhas boas a√ß√µes n√£o compram o Teu amor. Am√©m!‚Äù</p>
          `
        },
        captions: { color: 'Imagem colorida', bw: 'Para colorir' },
        buttons: {
          printBoy: 'Imprimir Desenho (Menino)',
          printGirl: 'Imprimir Desenho (Menina)',
          next: 'Pr√≥ximo devocional',
          boy: 'üë¶ Sou Menino',
          girl: 'üëß Sou Menina'
        },
        images: {
          // Usa os caminhos RELATIVOS
          boy: { color: BOY_COLOR_IMG, bw: BOY_BW_IMG }, 
          girl: { color: GIRL_COLOR_IMG, bw: GIRL_BW_IMG } 
        },
        print: { boy: BOY_PRINT_PDF, girl: GIRL_PRINT_PDF }
      },
      en: {
        header: {
            mainTitle: 'Devotional for Children',
            htmlTitle: 'Devotional for Children ‚Äî Day 1',
            play: '‚ñ∂Ô∏è Listen to Devotional',
            speed: 'Speed',
            stop: '‚èπÔ∏è Stop',
        },
        boy: {
          title: "Day 1 ‚Äî God‚Äôs Unique Gift",
          html: `
            <h3>Key Verse</h3>
            <p><strong>Galatians 1:8-9 (NLT):</strong> ‚ÄúLet God‚Äôs curse fall on anyone who preaches a different message than the one we preached to you.‚Äù</p>
            <h3>Summary</h3>
            <p>There‚Äôs only one amazing message about becoming friends with God: salvation is a gift from Jesus. It‚Äôs not a trophy we earn by doing everything right or following many rules. It‚Äôs only by God‚Äôs grace ‚Äî the most precious gift there is.</p>
            <h3>Practical Application</h3>
            <p>Have you ever thought you need to be the best, always obey, or never make mistakes for God to love you more? You don‚Äôt! Jesus already did everything for you. Be thankful and trust: His love doesn‚Äôt depend on your performance.</p>
            <h3>Prayer</h3>
            <p>‚ÄúDear God, thank You that salvation is a gift from Jesus. Help me remember You love me even when I fail. And that my good actions don‚Äôt buy Your love. Amen!‚Äù</p>
          `
        },
        girl: {
          title: "Day 1 ‚Äî God‚Äôs Unique Gift",
          html: `
            <h3>Key Verse</h3>
            <p><strong>Galatians 1:8-9 (NLT):</strong> ‚ÄúLet God‚Äôs curse fall on anyone who preaches a different message than the one we preached to you.‚Äù</p>
            <h3>Summary</h3>
            <p>There‚Äôs only one wonderful message about becoming friends with God: salvation is a gift from Jesus. It‚Äôs not a medal for those who do everything perfectly. It‚Äôs only His grace ‚Äî a gift of love that can‚Äôt be exchanged, completed, or improved.</p>
            <h3>Practical Application</h3>
            <p>Sometimes you may think you need to be perfect, never fail, or always please everyone for God to love you. But Jesus‚Äô love is already complete, just as you are. You can rest in that: He already did everything you need.</p>
            <h3>Prayer</h3>
            <p>‚ÄúDear God, thank You that salvation is a gift from Jesus. Help me remember You love me even when I fail. And that my good actions don‚Äôt buy Your love. Amen!‚Äù</p>
          `
        },
        captions: { color: 'Colored image', bw: 'Coloring page' },
        buttons: {
          printBoy: 'Print Coloring Page (Boy)',
          printGirl: 'Print Coloring Page (Girl)',
          next: 'Next devotional',
          boy: 'üë¶ I am a Boy',
          girl: 'üëß I am a Girl'
        },
        images: {
          boy: { color: BOY_COLOR_IMG, bw: BOY_BW_IMG }, 
          girl: { color: GIRL_COLOR_IMG, bw: GIRL_BW_IMG } 
        },
        print: { boy: BOY_PRINT_PDF, girl: GIRL_PRINT_PDF }
      },
      es: {
        header: {
            mainTitle: 'Devocional para Ni√±os',
            htmlTitle: 'Devocional para Ni√±os ‚Äî D√≠a 1',
            play: '‚ñ∂Ô∏è Escuchar Devocional',
            speed: 'Velocidad',
            stop: '‚èπÔ∏è Parar',
        },
        boy: {
          title: 'D√≠a 1 ‚Äî El Regalo √önico de Dios',
          html: `
            <h3>Vers√≠culo Clave</h3>
            <p><strong>G√°latas 1:8-9 (NTV):</strong> ‚ÄúQue caiga la maldici√≥n de Dios sobre cualquiera que predique un mensaje diferente del que les hemos dado.‚Äù</p>
            <h3>Resumo</h3>
            <p>Solo hay una noticia incre√≠ble sobre c√≥mo ser amigos de Dios: la salvaci√≥n es un regalo que Jes√∫s nos da. No es un trofeo que ganamos por hacerlo todo bien o seguir muchas reglas. Es solo por la gracia de Dios ‚Äî el regalo m√°s valioso que existe.</p>
            <h3>Aplicaci√≥n Pr√°ctica</h3>
            <p>¬øAlguna vez pensaste que ten√≠as que ser el mejor, obedecer siempre o nunca fallar para que Dios te ame m√°s? ¬°No! Jes√∫s ya hizo todo por ti. Agradece y conf√≠a: Su amor no depende de tu desempe√±o.</p>
            <h3>Oraci√≥n</h3>
            <p>‚ÄúQuerido Dios, gracias porque la salvaci√≥n es un regalo de Jes√∫s. Ay√∫dame a recordar que T√∫ me amas incluso cuando fallo. Y que mis buenas acciones no compran Tu amor. ¬°Am√©n!‚Äù</p>
          `
        },
        girl: {
          title: 'D√≠a 1 ‚Äî El Regalo √önico de Dios',
          html: `
            <h3>Vers√≠culo Clave</h3>
            <p><strong>G√°latas 1:8-9 (NTV):</strong> ‚ÄúQue caiga la maldici√≥n de Dios sobre cualquiera que predique un mensaje diferente del que les hemos dado.‚Äù</p>
            <h3>Resumo</h3>
            <p>Solo hay una noticia maravillosa sobre c√≥mo ser amigas de Dios: la salvaci√≥n es um regalo que Jes√∫s nos da. No es una medalla para quienes hacen todo perfecto. Es solo Su gracia ‚Äî um regalo de amor que no se puede cambiar, completar ni melhorar.</p>
            <h3>Aplicaci√≥n Pr√°ctica</h3>
            <p>A veces puedes pensar que necesitas ser perfecta, nunca fallar o siempre agradar a todos para que Dios te ame. Pero el amor de Jes√∫s ya es completo, tal como eres. Puedes descansar en eso: √âl ya hizo todo lo que necesitas.</p>
            <h3>Oraci√≥n</h3>
            <p>‚ÄúQuerido Dios, gracias porque la salvaci√≥n es um regalo de Jes√∫s. Ay√∫dame a recordar que T√∫ me amas incluso cuando fallo. Y que mis buenas acciones no compran Tu amor. ¬°Am√©n!‚Äù</p>
          `
        },
        captions: { color: 'Imagen a color', bw: 'P√°gina para colorear' },
        buttons: {
          printBoy: 'Imprimir dibujo (Ni√±o)',
          printGirl: 'Imprimir dibujo (Ni√±a)',
          next: 'Siguiente devocional',
          boy: 'üë¶ Soy Ni√±o',
          girl: 'üëß Soy Ni√±a'
        },
        images: {
          boy: { color: BOY_COLOR_IMG, bw: BOY_BW_IMG }, 
          girl: { color: GIRL_COLOR_IMG, bw: GIRL_BW_IMG } 
        },
        print: { boy: BOY_PRINT_PDF, girl: GIRL_PRINT_PDF }
      },
      fr: {
        header: {
            mainTitle: 'D√©votion pour Enfants',
            htmlTitle: 'D√©votion pour Enfants ‚Äî Jour 1',
            play: '‚ñ∂Ô∏è √âcouter la D√©votion',
            speed: 'Vitesse',
            stop: '‚èπÔ∏è Arr√™ter',
        },
        boy: {
          title: 'Jour 1 ‚Äî Le Cadeau Unique de Dieu',
          html: `
            <h3>Verset Cl√©</h3>
            <p><strong>Galates 1:8-9 (PDV):</strong> ¬´ Que la mal√©diction de Dieu tombe sur ceux qui annoncent un message diff√©rent de celui que nous avons annonc√©. ¬ª</p>
            <h3>R√©sum√©</h3>
            <p>Il n‚Äôy a qu‚Äôun message incroyable pour devenir amis de Dieu : le salut est un cadeau que J√©sus nous offre. Ce n‚Äôest pas un troph√©e que l‚Äôon gagne en faisant tout parfaitement ou en suivant beaucoup de r√®gles. C‚Äôest seulement par la gr√¢ce de Dieu ‚Äî le plus pr√©cieux des cadeaux.</p>
            <h3>Application Pratique</h3>
            <p>As-tu d√©j√† pens√© que tu dois √™tre le meilleur, toujours ob√©ir ou ne jamais te tromper pour que Dieu t‚Äôaime davantage ? Non ! J√©sus a d√©j√† tout fait pour toi. Remercie et fais-Lui confiance : Son amour ne d√©pend pas de tes performances.</p>
            <h3>Pri√®re</h3>
            <p>¬´ Cher Dieu, merci parce que le salut est un cadeau de J√©sus. Aide-moi √† me rappeler que Tu m‚Äôaimes m√™me quand je me trompe. Et que mes bonnes actions n‚Äôach√®tent pas Ton amour. Amen ! ¬ª</p>
          `
        },
        girl: {
          title: 'Jour 1 ‚Äî Le Cadeau Unique de Dieu',
          html: `
            <h3>Verset Cl√©</h3>
            <p><strong>Galates 1:8-9 (PDV):</strong> ¬´ Que la mal√©diction de Dieu tombe sur ceux qui annoncent un message diff√©rent de celui que nous avons annonc√©. ¬ª</p>
            <h3>R√©sum√©</h3>
            <p>Il n‚Äôy a qu‚Äôun message merveilleux pour devenir amies de Dieu : le salut est un cadeau que J√©sus nous offre. Ce n‚Äôest pas une m√©daille pour ceux qui font tout parfaitement. C‚Äôest seulement Sa gr√¢ce ‚Äî un cadeau d‚Äôamour qui ne peut pas √™tre √©chang√©, compl√©t√© ou am√©lior√©.</p>
            <h3>Aplicac√ß√£o Pr√°tica</h3>
            <p>Parfois, tu peux penser que tu dois √™tre parfaite, ne jamais te tromper ou toujours plaire √† tout le monde para que Deus te ame. Mas l‚Äôamour de J√©sus √© j√° completo, telle que tu es. Tu peux te reposer l√†-dessus : Il a d√©j√† fait tout ce dont tu as besoin.</p>
            <h3>Pri√®re</h3>
            <p>¬´ Cher Dieu, merci parce que le salut est um cadeau de J√©sus. Aide-moi √† me rappeler que Tu m‚Äôaimes m√™me quand je me trompe. Et que mes bonnes actions n‚Äôach√®tent pas Ton amour. Amen ! ¬ª</p>
          `
        },
        captions: { color: 'Image en couleur', bw: 'Page √† colorier' },
        buttons: {
          printBoy: 'Imprimer le dessin (Gar√ßon)',
          printGirl: 'Imprimer le dessin (Fille)',
          next: 'D√©votion suivante',
          boy: 'üë¶ Je suis un Gar√ßon',
          girl: 'üëß Je suis une Fille'
        },
        images: {
          boy: { color: BOY_COLOR_IMG, bw: BOY_BW_IMG }, 
          girl: { color: GIRL_COLOR_IMG, bw: GIRL_BW_IMG } 
        },
        print: { boy: BOY_PRINT_PDF, girl: GIRL_PRINT_PDF }
      }
    };

    // Helper para atualizar o conte√∫do e o tema visual, sem mexer no estado de "disabled" dos bot√µes de √°udio.
    function updateContent(langCode, gender) {
        const cfgLang = content[langCode];
        const cfg = cfgLang[gender];

        // 1. Atualiza o tema do body (para cor da borda das imagens, etc.)
        document.body.classList.remove('boy', 'girl');
        document.body.classList.add(gender);
        
        // 2. Atualiza o conte√∫do textual e imagens
        subtitleEl.textContent = cfg.title;
        devBox.innerHTML = cfg.html;

        // ATUALIZA A FONTE DA IMAGEM COLORIDA (com o novo caminho RELATIVO)
        imgColorSrc.src = cfgLang.images[gender].color;

        // ATUALIZA O TEXTO ALT da imagem colorida
        imgColorSrc.alt = gender === 'boy'
            ? (langCode === 'pt' ? 'Menino recebendo um presente colorido' :
            langCode === 'en' ? 'Boy receiving a colorful gift' :
            langCode === 'es' ? 'Ni√±o recibiendo um regalo colorido' :
            'Gar√ßon recevant un cadeau color√©')
            : (langCode === 'pt' ? 'Menina recebendo um presente colorido' :
            langCode === 'en' ? 'Girl receiving a colorful gift' :
            langCode === 'es' ? 'Ni√±a recibindo um regalo colorido' :
            'Fille recevant un cadeau color√©');

        // Atualiza legendas e textos de bot√£o
        captionColor.textContent = cfgLang.captions.color;
        
        printBtn.href = cfgLang.print[gender];
        printBtn.textContent = gender === 'boy' ? cfgLang.buttons.printBoy : cfgLang.buttons.printGirl;
    }

    // Dados das Bandeiras para o Bot√£o de Toggle
    const flagLanguageMap = {
        'pt': { src: 'https://flagicons.lipis.dev/flags/4x3/br.svg', alt: 'Bandeira do Brasil' },
        'en': { src: 'https://flagicons.lipis.dev/flags/4x3/us.svg', alt: 'US Flag' },
        'es': { src: 'https://flagicons.lipis.dev/flags/4x3/es.svg', alt: 'Bandera de Espa√±a' },
        'fr': { src: 'https://flagicons.lipis.dev/flags/4x3/fr.svg', alt: 'Drapeau de la France' }
    };

    // Idioma e g√™nero
    function setLang(lang) {
      currentLang = content[lang] ? lang : 'pt';
      const cfgLang = content[currentLang];
      const cfgHeader = cfgLang.header;

      // NOVO: Atualiza a bandeira no bot√£o de toggle
      const currentFlag = flagLanguageMap[currentLang];
      currentLangFlagEl.src = currentFlag.src;
      currentLangFlagEl.alt = currentFlag.alt;

      document.documentElement.lang = currentLang === 'pt' ? 'pt-BR' : currentLang;
      langSwitchEl.classList.remove('active'); // Esconde o seletor ap√≥s a sele√ß√£o

      // 1. Atualiza o t√≠tulo da aba e o t√≠tulo principal
      htmlTitleEl.textContent = cfgHeader.htmlTitle;
      mainTitleEl.textContent = cfgHeader.mainTitle;
      
      // 2. Atualiza textos dos bot√µes de g√™nero e legendas
      btnBoy.textContent = cfgLang.buttons.boy;
      btnGirl.textContent = cfgLang.buttons.girl;
      captionColor.textContent = cfgLang.captions.color;
      nextBtn.textContent = cfgLang.buttons.next;

      // 3. Atualiza textos dos bot√µes de √°udio/velocidade/parar
      playBtn.textContent = narrator.isPlaying || narrator.isPaused ? (narrator.isPaused ? '‚ñ∂Ô∏è Continuar' : '‚è∏Ô∏è Pausar Devocional') : cfgHeader.play;
      stopBtn.textContent = cfgHeader.stop;
      
      const currentRate = speeds[speedIdx].toFixed(2);
      speedBtn.textContent = `${cfgHeader.speed}: ${currentRate}x`; 

      // Apenas atualiza o conte√∫do com o idioma, mantendo o g√™nero atual.
      updateContent(currentLang, currentGender);
    }

    function setGender(gender) {
      currentGender = gender === 'girl' ? 'girl' : 'boy';
      
      // 1. Remove a classe de hover neutro (pois um tema foi escolhido)
      document.body.classList.remove('neutral-hover'); 

      // 2. Habilita os bot√µes de √°udio/a√ß√£o
      playBtn.removeAttribute('disabled');
      stopBtn.removeAttribute('disabled');
      speedBtn.removeAttribute('disabled'); 
      printBtn.removeAttribute('disabled');

      // 3. Gerencia a classe 'active' para os bot√µes de g√™nero
      btnBoy.classList.remove('active-boy', 'active-girl');
      btnGirl.classList.remove('active-boy', 'active-girl');
      if (currentGender === 'boy') {
          btnBoy.classList.add('active-boy');
      } else {
          btnGirl.classList.add('active-girl');
      }

      // 4. Exibe a se√ß√£o de imagens (TIRANDO O DISPLAY: NONE DO CSS)
      imagesSection.style.display = 'flex';

      // 5. Atualiza conte√∫do e tema do body (chama updateContent)
      updateContent(currentLang, currentGender);

      // Garante que o texto do play/pause seja redefinido para 'Play' ap√≥s a mudan√ßa de conte√∫do/g√™nero
      narrator.stop(); // Para a narra√ß√£o ativa, se houver
      const header = content[currentLang].header;
      playBtn.textContent = header.play;
    }

    // Narra√ß√£o ‚Äî Web Speech API (Mantido inalterado)
    const voicePrefs = {
      pt: { boy: ['Julio','Ricardo','Felipe'], girl: ['Francisca','Heloisa','Camila'] },
      en: { boy: ['Guy','Brian','Christopher'], girl: ['Aria','Jenny','Sarah'] },
      es: { boy: ['Alvaro','Jorge','Miguel'],   girl: ['Elvira','Lucia','Marta'] },
      fr: { boy: ['Henri','Paul','Philippe'],   girl: ['Denise','Celine','Amelie'] }
    };
    const localeMap = { pt: 'pt-BR', en: 'en-US', es: 'es-ES', fr: 'fr-FR' };
    let availableVoices = [];

    function voicesReady() {
      return new Promise(resolve => {
        const synth = window.speechSynthesis;
        let tries = 0;
        function check() {
          const voices = synth.getVoices();
          if (voices && voices.length > 0) {
            availableVoices = voices;
            resolve(voices);
          } else if (tries++ < 20) {
            setTimeout(check, 200);
          } else {
            availableVoices = voices || [];
            resolve(availableVoices);
          }
        }
        synth.onvoiceschanged = check;
        check();
      });
    }

    function pickVoice(langCode, gender) {
      const locale = localeMap[langCode] || 'pt-BR';
      const prefs = voicePrefs[langCode]?.[gender] || [];
      let v = availableVoices.find(x => x.lang === locale && prefs.some(n => x.name.toLowerCase().includes(n.toLowerCase())));
      if (v) return v;
      v = availableVoices.find(x => x.lang === locale);
      if (v) return v;
      v = availableVoices.find(x => (x.lang || '').toLowerCase().startsWith(langCode));
      if (v) return v;
      return availableVoices[0] || null;
    }

    class Narrator {
      constructor() {
        this.synth = window.speechSynthesis;
        this.rate = 0.95;
        this.pitchGirl = 1.3;
        this.pitchBoy = 1.2;
        this.voice = null;
        this.isPlaying = false;
        this.isPaused = false;
        this.text = '';
        this.langCode = 'pt';
        this.gender = 'boy';
      }

      async init(langCode, gender, text) {
        await voicesReady();
        this.voice = pickVoice(langCode, gender);
        this.langCode = langCode;
        this.gender = gender;
        this.text = text;
      }

      play() {
        if (!this.text) return;
        
        if (this.synth.speaking && this.isPaused) {
             this.synth.resume();
             this.isPaused = false;
             this.isPlaying = true;
             playBtn.textContent = '‚è∏Ô∏è Pausar Devocional';
             return;
        }

        this.isPlaying = true;
        this.isPaused = false;
        this.synth.cancel(); 
        const utter = new SpeechSynthesisUtterance(this.text);
        utter.lang = localeMap[this.langCode] || 'pt-BR';
        if (this.voice) utter.voice = this.voice;
        utter.rate = this.rate;
        utter.pitch = this.gender === 'girl' ? this.pitchGirl : this.pitchBoy;
        
        utter.onstart = () => {
             playBtn.textContent = '‚è∏Ô∏è Pausar Devocional';
        };
        utter.onend = () => {
             this.stop();
             const header = content[currentLang].header;
             playBtn.textContent = header.play;
        };

        this.synth.speak(utter);
      }

      pause() {
        if (!this.isPlaying) return;
        this.isPaused = true;
        this.isPlaying = false;
        try { 
            this.synth.pause();
            playBtn.textContent = '‚ñ∂Ô∏è Continuar';
        } catch {}
      }

      stop() {
        this.isPlaying = false;
        this.isPaused = false;
        try { this.synth.cancel(); } catch {}
        const header = content[currentLang].header;
        playBtn.textContent = header.play;
      }

      setRate(rate) {
        this.rate = rate;
      }
    }

    const narrator = new Narrator();

    // Event Listeners (Mantidos inalterados)
    playBtn.addEventListener('click', async () => {
      if (narrator.isPaused) {
        narrator.play(); 
        return;
      }

      if (narrator.isPlaying) {
        narrator.pause();
        return;
      }

      const text = (devBox.innerText || '').replace(/\s+/g, ' ').trim();
      if (!text) return;
      
      await narrator.init(currentLang, currentGender, text);
      narrator.play();
    });

    speedBtn.addEventListener('click', () => {
      speedIdx = (speedIdx + 1) % speeds.length;
      const rate = speeds[speedIdx];
      narrator.setRate(rate);
      
      const speedText = content[currentLang].header.speed;
      speedBtn.textContent = `${speedText}: ${rate.toFixed(2)}x`; 
      
      if (narrator.isPlaying) {
        narrator.stop();
        narrator.play();
      }
    });

    stopBtn.addEventListener('click', () => {
      narrator.stop();
    });

    // Inicializa√ß√£o
    currentLang = 'pt';
    currentGender = 'boy';

    // 1. Carrega o idioma 
    setLang('pt'); 

    // 2. Define o estado visual inicial: bot√µes de g√™nero transparentes, hover neutro.
    btnBoy.classList.remove('active-boy');
    btnGirl.classList.remove('active-girl');
    document.body.classList.remove('boy', 'girl'); 
    document.body.classList.add('neutral-hover');

    // 3. Garante que os bot√µes de √°udio/a√ß√£o estejam desabilitados no carregamento inicial
    playBtn.setAttribute('disabled', 'disabled');
    stopBtn.setAttribute('disabled', 'disabled');
    speedBtn.setAttribute('disabled', 'disabled');
    printBtn.setAttribute('disabled', 'disabled'); 
    
    // 4. Garante que a se√ß√£o de imagens esteja OCULTA no carregamento inicial
    imagesSection.style.display = 'none';

  </script>
</body>
</html>